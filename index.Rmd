---
title: "ETC5521 Assignment 1"
subtitle: ""
team: [Echidna]
author:
  - [Ruimin Lin]
  - [Rahul Bharadwaj]
date: "`r Sys.Date()`"
output: 
  html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      message = FALSE,
                      warning = FALSE,
                      fig.align = 'center')
```

```{r}
library(tidyverse)
library(kableExtra)
library(plotly)
```

```{r ReadData}
board_games <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-03-12/board_games.csv")
```

[This assignment is for ETC5521 Assignment 1 by Team `r rmarkdown::metadata$team` comprising of `r knitr::combine_words(rmarkdown::metadata$author)`.]{style="color:#006DAE;"}


## Introduction and Motivation

Board Game has been a type of leisure that people have enjoyed from a very long time even before computers and video-games existed and has gone through enormous evolution ever since its inception. Board Games enables a way for people to socialize, reducing stress under such a fast-moving society, and paves way for an extensive brain exercise. Being a popular choice of leisure, what makes board games great? What is the reason for Board Games to have survived in a world of Virtual Reality games? In other words, what are the common characteristics of top ranked board games? What are the best board games in terms of average rating? 

The original board games data used in this report is obtained from the [Board Game Geek](https://boardgamegeek.com/) database, and is cleaned and shared by [Thomas Mock](https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-03-12). 

The tidy dataset consists of `r ncol(board_games)` columns and `r nrow(board_games)` rows, in which there are `r ncol(board_games)` variables and `r nrow(board_games)` observations. It consists of data such as max/min playtime, max/min players, min age of players that can play, game designer, game publisher, mechanics of the game and a lot more. One thing to notice is that even though the data set is tidy, we still find observations in variables like `category`, `family`, `mechanic` to be messy and repetitive, which may limit our ability to explore these variables.

## Data Description

The aim of this exploratory analysis is to find out what factor affects the average rating of board games. This would give insights as to what board games are most popular and the characteristics these board games share. Therefore, we have articulated the following questions to help us with further exploration of the board games data.

Primary Question:

**What are the common characteristics of top ranked board games?**

Secondary Questions:

1. What are the top 10 ranked board games?
2. How do variables like min/max playtime, min/max players, or min_age affect the average rating?
3. What is the relation between min_age and average_rating of games? Do children play more or adults play more?

The variables included in the data are as follows:

```{r}
glimpse(board_games)
```
The explanation of variables and variable types are provided to enable a better understanding of the variables in board games data set.

* game_id: ID of a particular game, the game_id should be a character vector(categorical) instead of a double vector mentioned in the table above.

* description: Game description, a character vector.

* image: URL image of the game, a character vector.

* max_players/min_player: maximum/minimum number of recommended players, double vectors.

* max_playtime/min_playtime: maximum/minimum recommended playtime, double vectors.

* min_age: recommended minimum player age, double vectors.

* name: name of the game, a character vector.

* playing_time: average playtime of a game, a double vector.

* thumbnail: URL thumbnail of the game, a character vector.

* year_published: year the game was published, a double vector.

* artist: artist for game art, a character vector.

* category: categories of the game, a character vector.

* compilation: name of compilation, a character vector.

* designer: game designer, a character vector.

* expansion: name of expansion pack (if any), a character vector.

* family: family of game - equivalent to a publisher, a character vector.

* mechanic: how game is played, a character vector.

* publisher: company/person who published the game, a character vector.

* average_rating: average rating from 1 to 10 on the website(Board Games Geek), a double vector.

* users_rated: number of users rated the game, a double vector.

To ensure the reliability of the board game ratings, the data is limited to games with at least 50 ratings and for games between 1950 and 2016. The site's database has more than 90,000 games with crowd-sourced ratings.

The original board games data set consists of 90400 observations, and 80 variables. Therefore, data cleaning and wrangling is necessary to enable better analysis procedure. Thomas has replaced long and complicated variable names like `details.description` in original data to `description` using `janitor::clean_names` and `set_names` function, which avoids messy code writing. In addition, he has eliminated around 50 variables using the `select` function and that leaves 27 variables at this stage.

The data set is then filtered to board games published from 1950 to 2016, with at least 50 users rated. 'NA' values in variable `year_published` is also omitted. Thomas then excludes variables that may not be useful for the analysis, such as `attributes_total`, `game_type` etc., which ultimately, leaves us with a tidy data set (22 variables and 10532 variables) that is relatively concise and convenient for further exploration.

## Analysis and findings

[FILL] Should include at least one plot or numerical summary for each of your questions, that helps the reader arrive at an answer. You should also write paragraphs describing the methods, summaries and findings. 

1. What are the top 10 ranked board games?

```{r}
Q1 <- board_games %>%
  arrange(desc(average_rating)) %>%
  head(10)

Q1 %>%
  dplyr::select(name, average_rating, max_playtime, 
                min_playtime, max_players, min_players) %>%
  kable() %>%
  kable_styling(bootstrap_options = c("striped", "hover"))
```

2. How do variables like min/max playtime, min/max players, or min_age affect the average rating in these top-ranked board games?

- to have a better idea on the common characteristics of top-ranked board games, we have widened the range to top 50.(to ensure the reliability)

```{r}
board_games_top50 <- board_games %>%
  dplyr::select(game_id, 
                max_players, 
                max_playtime, 
                min_players, 
                min_playtime, 
                min_age, 
                name,
                playing_time,
                year_published,
                designer,
                average_rating,
                users_rated) %>%
  arrange(desc(average_rating)) %>%
  head(50)
```

```{r}
p1 <- board_games_top50 %>%
  ggplot(aes(max_playtime, average_rating, colour = name)) +
  geom_point() +
  theme(legend.position = "none")

ggplotly(p1)
```
In plot 1 we can see that there are a few obvious distinct values present, which are:

* The Greatest Day:Sword, Juno, and Gold Beaches with 6000 minutes max. playtime and an average rating of 8.8308

* Axis Empires: Totaler Krieg! with 3600 minutes max. playtime and average rating of 8.4194

* Beyond the Rhine with 3000 minutes max. playtime and average rating of 8.5979

It is difficult to examine the trend or common characteristics with these outliers presents, therefore, we have limited the maximum playtime to less than xx minutes using the IQR outliers formula. (Q1 - 1.5IQR and Q3 + 1.5 IQR)

```{r}
summary(board_games_top50$max_playtime)

82.5 - 1.5*(345-82.5)
345 + 1.5*(345-82.5)
```

```{r}
p1a <- board_games_top50 %>%
  dplyr::filter(max_playtime < 738.75) %>%
  ggplot(aes(max_playtime, average_rating, colour = name)) +
  geom_point() +
  theme(legend.position = "none")

ggplotly(p1a)
```
Now we can have a clearer picture of where majority of top-50 ranked board games lie in the graph of average rating against maximum playtime. Where, majority of board games lie within the range of 200 minutes of maximum playtime.

```{r}
summary(board_games_top50$min_playtime)

45 - 1.5*(180-45)
180 + 1.5*(180-45)
```
```{r}
p2 <- board_games_top50 %>%
  dplyr::filter(min_playtime < 382.5) %>%
  ggplot(aes(min_playtime, average_rating, colour = name)) +
  geom_point() +
  theme(legend.position = "none")

ggplotly(p2)
```
We have implemented the same method to omit the outliers as done previously, the graph demonstrates that in top-50 ranked board games, most of them have a minimum playtime less than 100 minutes.

```{r}
p3 <- board_games_top50 %>%
  ggplot(aes(min_players, average_rating, colour = name)) +
  geom_point() +
  theme(legend.position = "none")

ggplotly(p3)
```

In the scatterplot for average rating against minimum players, we observed that most top 50 board games have at least 2 players.

```{r}
p4 <- board_games_top50 %>%
  dplyr::filter(max_players <15) %>%
  ggplot(aes(max_players, average_rating, colour = name)) +
  geom_point() +
  theme(legend.position = "none")

ggplotly(p4)
```

In the scatterplot for average rating against maximum players, we observed that most top 50 board games have a maximum of 4 or 5 players.


```{r}
p5 <- board_games_top50 %>%
  ggplot(aes(min_age, average_rating, colour = name)) +
  geom_point() +
  theme(legend.position = "none")

ggplotly(p5)
```

In the scatterplot for average rating against minimum age of players, we observed that the minimum age set by majority of board games are between 10 - 15.

## References

* BoardGameGeek | Gaming Unplugged Since 2000. (2000). BGG. https://boardgamegeek.com/BoardGameGeek

* Thomas Mock, (2019). Tidy Tuesday. https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-03-12
